{% extends "base.html" %}

{% block title %}CRFMS - Search Vehicles{% endblock %}

{% block header_title %}ğŸ” Search Available Vehicles{% endblock %}

{% block content %}
<div class="content">
    <h2>Find Your Perfect Vehicle</h2>
    
    <form method="POST" style="max-width: 600px; margin: 30px auto;">
        <div class="form-group">
            <label for="location">ğŸ“ Pickup Location</label>
            <select name="location" id="location" required>
                <option value="">Select a location...</option>
                {% for location in locations %}
                <option value="{{ location.name }}">{{ location.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="vehicle_class">ğŸš— Vehicle Class</label>
            <select name="vehicle_class" id="vehicle_class" required>
                <option value="">Select a class...</option>
                {% for vc in vehicle_classes %}
                <option value="{{ vc.name }}">{{ vc.name }} - ${{ vc.base_rate.amount }}/day</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="pickup_date">ğŸ“… Pickup Date & Time</label>
            <input type="datetime-local" name="pickup_date" id="pickup_date" required>
        </div>

        <div class="form-group">
            <label for="return_date">ğŸ“… Return Date & Time</label>
            <input type="datetime-local" name="return_date" id="return_date" required>
        </div>

        <button type="submit" class="btn btn-success" style="width: 100%; padding: 15px; font-size: 16px;">
            ğŸ” Search Available Vehicles
        </button>
    </form>

    <div style="background: #e7f3ff; border-left: 4px solid #2196F3; padding: 20px; margin-top: 30px; border-radius: 5px;">
        <h4 style="color: #2196F3; margin-bottom: 10px;">ğŸ’¡ Search Tips</h4>
        <ul style="margin-left: 20px; color: #555;">
            <li>Select your preferred pickup location</li>
            <li>Choose the vehicle class that fits your needs</li>
            <li>Specify your rental period</li>
            <li>We'll show you available vehicles and pricing</li>
        </ul>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Set minimum date to today
    const now = new Date();
    now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
    document.getElementById('pickup_date').min = now.toISOString().slice(0, 16);
    document.getElementById('return_date').min = now.toISOString().slice(0, 16);
    
    // Update return date minimum when pickup date changes
    document.getElementById('pickup_date').addEventListener('change', function() {
        document.getElementById('return_date').min = this.value;
    });
</script>
{% endblock %}
